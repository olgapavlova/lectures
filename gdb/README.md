![2024-12-06-round](https://github.com/user-attachments/assets/1f9f97de-4f9f-4401-a45f-a2f4d8806464)

# –û—Ç–ª–∞–¥—á–∏–∫–∏ –≤ C ‚Ä¢ GDB‚ÄîLLDB‚Äî‚Ä¶
–ó–∞–ø–∏—Å—å —Å—Ç—Ä–∏–º–∞ –Ω–∞ Youtube: https://youtu.be/r6RMf5hXGbU

## –ò–¥–µ—è –≤ —Ü–µ–ª–æ–º

1. –ö–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º—ã —ç—Ç–æ–≥–æ –Ω–µ –≤–∏–¥–∏–º.
2. **–û–±–∏–¥–Ω–æ!**
3. –î–∞–≤–∞–π—Ç–µ —Å–º–æ—Ç—Ä–µ—Ç—å –≤–Ω—É—Ç—Ä—å.

## –ß—Ç–æ —Ç–∞–∫–æ–µ ¬´–≤–Ω—É—Ç—Ä—å¬ª –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã?

```mermaid
flowchart LR

program[–ü—Ä–æ–≥—Ä–∞–º–º–∞]
subgraph –°—Ç–µ–∫_–≤—ã–∑–æ–≤–æ–≤
direction TB
frame1[–ö–∞–¥—Ä, —Ñ—Ä–µ–π–º 0]
frame2[–ö–∞–¥—Ä, —Ñ—Ä–µ–π–º 1]
end
mem[–ü–∞–º—è—Ç—å]

program -.-> –°—Ç–µ–∫_–≤—ã–∑–æ–≤–æ–≤

frame1 -.->|—É–∫–∞–∑–∞—Ç–µ–ª–∏| mem
frame2 -.->|—É–∫–∞–∑–∞—Ç–µ–ª–∏| mem

```

- **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞** ‚Äî –∞–Ω–∞–ª–∏–∑ —Å—Ç–µ–∫–∞ –≤—ã–∑–æ–≤–æ–≤
- **–û—Å—Ç–∞–Ω–æ–≤** ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ üôÇ

## –ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º?

```mermaid
flowchart LR

start[–ü–æ–µ—Ö–∞–ª–∏]
stop[–û—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å]
look[–û–≥–ª—è–Ω—É–ª–∏—Å—å]
run[–ï–¥–µ–º]

start -.-> stop
stop -.-> look
look -.-> run
run -.-> stop
```

- –£–¥–æ–±–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥ —Ä—É–∫–æ–π –∫–æ–¥ –∏ —Å–≤–µ—Ä—è—Ç—å—Å—è —Å –Ω–∏–º
- –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ—á–µ–∫
- –ì–¥–µ —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å `print` ‚Äî —Ç–∞–º –ø–æ—Ä–∞ –∏–¥—Ç–∏ –≤ –æ—Ç–ª–∞–¥—á–∏–∫


> [!NOTE]
> –û—Ç–ª–∞–¥—á–∏–∫ ‚Äî –∑–∞–º–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–º—É `printf`

## –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥

### üî∂¬†–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è

`-g` —Ñ–ª–∞–≥ –¥–ª—è `gcc`

`-gdwarf-2` —Ñ–ª–∞–≥ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å DW_FORM_GNU_str_index

`-O0` —á—Ç–æ–±—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ —É–¥–∞–ª—è–ª ¬´–ª–∏—à–Ω–∏–µ¬ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

`gdb ./soft` `lldb ./soft` –∑–∞–ø—É—Å–∫ –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã soft

### –ü–æ–µ—Ö–∞–ª–∏ ‚Ä¢ –í–Ω—É—Ç—Ä–∏ `gdb` | `lldb`

`file [–ø—É—Ç—å –∫ —Ñ–∞–π–ª—É]` –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ –æ—Ç–ª–∞–¥—á–∏–∫

`break set ‚Äîname main` –Ω–µ —Ö–æ—á–µ—Ç –±–µ–∑ —ç—Ç–æ–≥–æ —Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏

`r` —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É

`r arg1 arg2` —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏

### –ú–æ–∂–µ—Ç –±—ã—Ç—å, –ø–æ—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è?

(gdb)`b get func` –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏

`b file.c:123` –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π (–µ—Å–ª–∏ —É–∂–µ —Å—Ç–æ–∏–º ‚Äî `break 123`)

`watch expr` | `watch set var my_var` –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è –ø–∞–º—è—Ç—å, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (—Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞!)

`dis 7` | `break dis 7` –≤—ã–∫–ª—é—á–∏—Ç—å —Ç–æ—á–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∞ 7 (–µ—Å—Ç—å –∏ –≤–∫–ª, –∏ —É–¥–∞–ª–µ–Ω–∏–µ)

`info break` | `break break` —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ –æ—Å—Ç–∞–Ω–æ–≤–∞

### –î–∞–π—Ç–µ –æ–≥–ª—è–¥–µ—Ç—å—Å—è

`bt` —Å—Ç–µ–∫ –∫–∞–¥—Ä–æ–≤

`f` –Ω–∞ –∫–∞–∫–æ–º –º—ã –∫–∞–¥—Ä–µ (—Å –Ω–æ–º–µ—Ä–æ–º ‚Äî –ø–µ—Ä–µ—Ö–æ–¥)

(gdb) `info args`, `info vars` –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ç–µ–∫–∞

(lldb) `v` —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Äî `frame var`)

`p expr` –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —É–∫–∞–∑–∞—Ç–µ–ª—å; –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ –æ—Ç–ª–∞–¥—á–∏–∫–∞; –≤ gdb –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –º–æ–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è –∫–∞–∫ –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–æ –Ω–æ–º–µ—Ä–∞–º —Å—Ç—Ä–æ–∫ ‚Äî `$4` –∏ —Ç. –¥.)

`p *my_array@10` | `mem read -tint -c10 my_array` –≤—ã–≤–µ—Å—Ç–∏ –º–∞—Å—Å–∏–≤ (`-t` ‚Äî –∫–ª—é—á —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏–π)

`disp expr` –ø–µ—á–∞—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (–Ω–ø—Ä., –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Å—Ç–∞–Ω–æ–≤–µ

(gdb) `l` –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∞ ¬±10 —Å—Ç—Ä–æ–∫

### –ï–¥–µ–º –¥–∞–ª—å—à–µ

`c` –¥–æ —Å–ª–µ–¥—É—é—â–µ–π —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ (–∏–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞)

`s` —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞, –≤—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏

`n` —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞, –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏

(lldb) `si` —Å–ª–µ–¥—É—é—â–∞—è –º–∞—à–∏–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

`j 123` –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å—Ç—Ä–æ–∫–µ 123 (–∞ –Ω–∞–∑–∞–¥ —Ç–æ–∂–µ?)

(gdb) `u` –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–æ –∫–æ–Ω—Ü–∞ –Ω—ã–Ω–µ—à–Ω–µ–≥–æ –±–ª–æ–∫–∞ (–æ–±—ã—á–Ω–æ —Å—Ç—Ä–æ–∫–∞)

`up` / `down` –≤–≤–µ—Ä—Ö / –≤–Ω–∏–∑ –ø–æ —Å—Ç–µ–∫—É —Ñ—Ä–µ–π–º–æ–≤ (–±–æ–ª—å—à–µ ‚Äî –≤—ã—à–µ ‚Äî –≥–ª—É–±–∂–µ)

(gdb) `ret` –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Ç–æ—á–∫—É –≤—ã–∑–æ–≤–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ñ—Ä–µ–π–º–∞ (–Ω–∞ —É—Ä–æ–≤–µ–Ω—å –Ω–∏–∂–µ)

`<Enter>` –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é –∫–æ–º–∞–Ω–¥—É

### –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å
`.gdbinit` `.lldbinit` —Ç—É—Ç —Ö—Ä–∞–Ω–∏–º –º–∞–∫—Ä–æ—Å—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

(gdb) `set $my_var = struct->inside->program` —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–≤ lldb —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ C; –ø–æ —Ñ–∞–∫—Ç—É —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –≤–Ω—É—Ç—Ä—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–ª–∏ –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É)

## –ü—Ä–∞–∫—Ç–∏–∫—É–µ–º—Å—è –Ω–∞ luma

> [!WARNING]
> **–≠—Ç–æ –æ—á–µ–Ω—å —Å—Ç—Ä–∞—à–Ω—ã–π –∫–æ–¥.**
> –ü—Ä—è–º–æ –±–æ–ª—å.
> –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–¥–µ–ª–∞–Ω–æ.
> –î–∞–ª–æ—Å—å —Å —Ç—Ä—É–¥–æ–º.
> –ù–∏–∫–æ–≥–¥–∞ —Ç–∞–∫ –Ω–µ –ø–∏—à–∏—Ç–µ.

[luma ‚Äî –ø–ª–æ—Ö–∞—è, –ø–ª–æ—Ö–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞!](src/luma.c) 
- –§—É —Ç–∞–∫–æ–π –±—ã—Ç—å üëø
