
![2025-04-04](https://github.com/user-attachments/assets/2e5665a9-8462-4325-a6e8-71f3bea10cb8)

Youtube-–∑–∞–ø–∏—Å—å —Å—Ç—Ä–∏–º–∞ –æ—Ç ```2025-04-04```: https://youtu.be/hpVPlJ0J2tw

# –ü–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å —è–¥—Ä–∞ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –µ–≥–æ —Ä–∞–∑–≥–ª—è–¥—ã–≤–∞–Ω–∏—è

–¢–µ–ø–µ—Ä—å –º—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º **–≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ** ‚Äî ¬´–≤ —è–¥—Ä–µ¬ª –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### ü¶Ñ¬†–§–∞–Ω—Ç–∞–∑–∏–∏

–ö–∞–∫ –≤—Å–µ–≥–¥–∞, –±–æ–ª—å—à–µ –ø—Ä–æ –∏—Å—Ç–æ—Ä–∏—é, —á–µ–º –ø—Ä–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å

```mermaid
flowchart LR
hard(–∂–µ–ª–µ–∑–æ)
os(–û–°)
app(–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
user(—á–µ–ª–æ–≤–µ–∫)

hard:::real <==> os:::digital <==> app:::digital <==> user:::real

classDef real fill:#D79921,color:#504945;
classDef digital fill:#979736,color:#E8DBB6;

```

### üê¥¬†–ü—Ä–∞–≤–¥–∞

–ß–µ–ª–æ–≤–µ–∫—É –Ω—É–∂–Ω—ã –∫–Ω–æ–ø–æ—á–∫–∏

```mermaid
flowchart LR
hard(–∂–µ–ª–µ–∑–æ)
os(–û–°)
app(–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
user(—á–µ–ª–æ–≤–µ–∫)

user:::real <==> hard:::real <==> os:::digital <==> app:::digital 

classDef real fill:#D79921,color:#504945;
classDef digital fill:#979736,color:#E8DBB6;

```

- –ú–æ–∂–Ω–æ *–∞–∫–∫—É—Ä–∞—Ç–Ω–æ* –¥—É–º–∞—Ç—å –∫–∞–∫ –ø—Ä–æ frontend –∏ backend
- –Ø–∑—ã–∫ *–∫–∞–∫ –±—ã* —Ç–æ—Ç –∂–µ, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã *–∫–∞–∫ –±—ã* —Ç–µ –∂–µ, **–Ω–æ –Ω–µ—Ç**

## –ß—Ç–æ –∑–∞ –º–æ–¥—É–ª–∏ –∏ –ø—Ä–∏ —á—ë–º —Ç—É—Ç –¥—Ä–∞–π–≤–µ—Ä—ã?

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Ö–æ—á–µ—Ç—Å—è –æ–±—â–∞—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –î–ª—è —ç—Ç–æ–≥–æ –µ–º—É –Ω—É–∂–Ω–æ –∂–µ–ª–µ–∑–æ
- –ó–Ω–∞—á–∏—Ç, –û–° –¥–æ–ª–∂–Ω–∞ –∫–∞–∫-—Ç–æ –¥–∞–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø (–¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π!) –∫ –∂–µ–ª–µ–∑—É
- –Ø–¥—Ä–æ Linux ‚Äî ~~–Ω–µ–ø–æ—Å—Ç–∏–∂–∏–º–∞—è –∫–∞—à–∞~~ –º–æ–Ω–æ–ª–∏—Ç
- –ù–æ –µ–º—É —Ä–∞–∑—Ä–µ—à–∏–ª–∏ —Ü–µ–ø–ª—è—Ç—å –∫ —Å–µ–±–µ ¬´–ø–ª–∞–≥–∏–Ω—ã¬ª

```mermaid
flowchart LR

subgraph –∂–µ–ª–µ–∑–æ
material(—Ä–µ–∞–ª—å–Ω—ã–µ —à—Ç—É–∫–∏)
micro(–º–∏–∫—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä)
material:::real <==> micro:::rd
end
–∂–µ–ª–µ–∑–æ:::real

subgraph –û–°
driver(driver)
kernel(—è–¥—Ä–æ)
driver:::digital <==> kernel:::digital
end

micro <==> driver

app(–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

–û–°:::digital <==> app:::digital

classDef real fill:#D79921,color:#504945,stroke:gray,stroke-width:5px;
classDef digital fill:#979736,color:#E8DBB6,stroke:gray,stroke-width:5px;
classDef rd fill:#979736,stroke:#D79921,stroke-width:10px,stroke-dasharray: 5 5;
```

## –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏–º —ç—Ç–æ

```c
#include <linux/init.h>
#include <linux/module.h>

static int __init silent_init(void) { return 0; }
static void __exit silent_exit(void) { }

module_init(silent_init);
module_exit(silent_exit);

MODULE_LICENSE("GPL");
```

- –ë–æ–ª–≤–∞–Ω–∫–∞ –º–æ–¥—É–ª—è
- –ê —á—Ç–æ –µ—Å–ª–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å —É–±—Ä–∞—Ç—å? ‚Äî **–≤–ø–µ—Ä—ë–¥!**

## –î–∞ –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å-—Ç–æ?!

### –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º

```makefile
KREL = $(shell uname -r)  # —Ä–µ–ª–∏–∑ —è–¥—Ä–∞
KDIR = /lib/modules/$(KREL)/build

PWD = $(shell pwd)  # –∫—É–¥–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è

TARGET = silent

obj-m := $(TARGET).o

all:
	$(MAKE) -C $(KDIR) M=$(PWD) modules
```

- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ—Ä—ë–º ¬´–æ—Ç —è–¥—Ä–∞¬ª
- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º —Å –ø–æ–º–æ—â—å—é [Makefile —è–¥—Ä–∞](https://www.kernel.org/doc/html/latest/kbuild/makefiles.html)

- **–ù–µ –∫–æ–º–ø–∏–ª–∏—Ç—Å—è?**
    
    ```bash
    sudo apt install build-essential linux-headers-$(uname -r)
    ```
    
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞–º –ª—É—á—à–µ –±—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –∞–±-—Å–æ-–ª—é—Ç-–Ω–æ (–Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ)
    
    ```makefile
    CC = $(grep CONFIG_CC_VERSION /boot/config-$(uname -r) | cut -d'"' -f2 | awk '{print $$1}')
    ...
    	$(MAKE) CC=$(CC) ...
    ```
    

`silent.ko` ‚Äî –≤–æ—Ç –Ω–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏


- **–û–±—ä–µ–∫—Ç–Ω—ã–π —Ñ–∞–π–ª ‚Äî –∫–∞–∫ `.o`**
    
    `file silent.ko`
    
    `modinfo silent.ko`
    
    `nm silent.ko`
    
    `objdump -h silent.ko`
    
    `readelf -s silent.ko`
    
    `‚Ä¶ | grep FUNC`
    
    `‚Ä¶ | grep __UNIQUE`
    

### –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫ —è–¥—Ä—É ‚Äî –ü—Ä–æ–≤–µ—Ä—è–µ–º ‚Äî –û—Ç–∫–ª—é—á–∞–µ–º

`sudo insmod silent.ko`

`lsmod | grep silent`

`sudo rmmod silent`

## –û—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ: ¬´—Å–Ω–∞—á–∞–ª–∞ –±–∞–∑–∞¬ª –Ω–µ –≤—ã–π–¥–µ—Ç

- –Ø–¥—Ä—É –¥–µ—Å—è—Ç–∫–∏ –ª–µ—Ç, —Ç–∞–º —Å—Ç–æ–ª—å–∫–æ –Ω–∞—Ä–æ—Å–ª–æ‚Ä¶
- –Ø–¥—Ä–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è, –∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ª–∞–∫–æ–Ω–∏—á–Ω–∞, –µ—Å–ª–∏ –≤–æ–æ–±—â–µ –µ—Å—Ç—å
- –ó–Ω–∞—é—â–∏—Ö –ª—é–¥–µ–π –º–∞–ª–æ (–∂–¥—ë–º –≤ –∫–æ–º–º–µ–Ω—Ç—ã!)
- –í—Å—ë –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ–≥–æ (–æ–π, –≤—Å—ë)


–î–∞–≤–∞–π—Ç–µ –ø–æ–≤–µ—Ä–∏–º **–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ–ø—ã—Ç–Ω—ã–º** –ª—é–¥—è–º. –•–æ—Ç—å –Ω–∞ –º–∏–Ω—É—Ç–∫—É

**–ü—Ä–æ–±—É–µ–º** ‚Üí –Ω–∞—Ç—ã–∫–∞–µ–º—Å—è ‚Üí —Ä–∞–∑–±–∏—Ä–∞–µ–º—Å—è ‚Üí **–ø—Ä–æ–±—É–µ–º** ‚Üí –Ω–∞—Ç—ã–∫–∞–µ–º—Å—è ‚Üí ‚Ä¶

## –ú–æ—Ä–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π [printk()](https://docs.kernel.org/core-api/printk-basics.html)

`tail -f /var/log/kern.log`

`dmesg -w`

–ú–æ–¥—É–ª—å –¥–∞–∂–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å: `return -2`

```c
printk("Hello, world!\n");
```

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–µ–∑ `\n`, –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ

```c
printk(KERN_EMERG "Hello, world!\n");
```

- [–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](https://docs.kernel.org/core-api/printk-basics.html) ‚Äî –º–∞–∫—Ä–æ—Å—ã
    
    `cat /proc/sys/kernel/printk`
    
- [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–∞](https://www.kernel.org/doc/html/v5.6/core-api/printk-formats.html)

```c
printk("%p", CONFIG_);
```

`cat /boot/config-`uname -r` | wc -l`

`CONFIG_PHYSICAL_START` –≥–¥–µ –Ω–∞—á–∞–ª–æ

`CONFIG_DEBUG_INFO_BTF` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

`CONFIG_SMP` –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–¥–µ—Ä

`CONFIG_64BIT` —è–¥—Ä–æ

`CONFIG_X86_64` –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
