# –ü—Ä–∏—ë–º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏
–ü–æ–¥–∫—Ä–∞–¥—ã–≤–∞–µ–º—Å—è –∫ –û–û–ü. –ù–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ: —Å —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–∞, —á—Ç–æ –≤ C —Ñ—É–Ω–∫—Ü–∏–∏ (–∫–∞–∫ –∏ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ) ‚Äî —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª–∏. –ö–∞–∫ –Ω–∞–º —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –∑–∞—Ö–æ—Ç–µ—Ç—å –∏ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å –æ–±—ä–µ–∫—Ç–Ω–æ-–Ω–∞–ø–æ–º–∏–Ω–∞—é—â–µ–µ? –ò –∑–∞—á–µ–º? –†–∞–∑–±–µ—Ä—ë–º—Å—è.

# –õ–µ–∫—Ü–∏—è ‚Ä¢ –¢–µ–æ—Ä–∏—è ‚Ä¢ –®–ø–∞—Ä–≥–∞–ª–∫–∞ ‚Ä¢ –ö–æ—Ä–æ—á–µ, –Ω–µ –∫–æ–¥

### –û —á—ë–º –≤–æ–æ–±—â–µ —Ä–µ—á—å?

```mermaid
flowchart LR

name([–ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏])
subgraph –ü–∞–º—è—Ç—å —Å –∞–¥—Ä–µ—Å–∞–º–∏
code{{–ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏}}

end

name --> code
```

- `–§—É–Ω–∫—Ü–∏—è = –∏–º—è + –∫–æ–¥`
- –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–æ–ª—å–∫–æ *—É–∫–∞–∑—ã–≤–∞–µ—Ç* –Ω–∞ –µ—ë ¬´—Ç–µ–ª–æ¬ª, –Ω–æ –Ω–µ –ø—Ä–∏—à–∏—Ç–æ –∫ –Ω–µ–º—É –Ω–∞–º–µ—Ä—Ç–≤–æ.
- –ö–æ–¥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≥–¥–µ-—Ç–æ –≤ –ø–∞–º—è—Ç–∏.

```mermaid
flowchart LR

name([–ù–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏])
subgraph –ü–∞–º—è—Ç—å —Å –∞–¥—Ä–µ—Å–∞–º–∏
code{{–ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏}}

end

pseudo([–•–æ—á—É –¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ!])

name --> code

pseudo -.-> code
```

- –í—Å—ë, —á—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∫–∞–∫–æ–º—É-—Ç–æ –∞–¥—Ä–µ—Å—É.
- –£–∫–∞–∑–∞—Ç–µ–ª–∏ ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —à—Ç—É–∫–∞, —á—Ç–æ–±—ã —Ö–æ–¥–∏—Ç—å –ø–æ –∞–¥—Ä–µ—Å–∞–º.
- –î–∞–≤–∞–π—Ç–µ –∏—Ö –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å, *–∫–∞–∫ –æ–±—ã—á–Ω–æ*.

```c
...
e = printf;
...
e("–ö–æ–¥ –æ—à–∏–±–∫–∏: %d\n", ERR_STR_TYPE);
```

1. –§—É–Ω–∫—Ü–∏—è ‚Äî **–Ω–µ** –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
2. –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é

- –£–∫–∞–∑–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–æ *–≤—Å—ë–º* –ø–æ—Ö–æ–∂ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é:
    - —Ç–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞;
    - –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –∏—Ö —Ç–∏–ø—ã.
- –¢–∞–∫ –∏ –Ω–∞–ø–∏—à–µ–º:
    
    ```c
    int f(char *, int);
    int (*g)(char *, int);
    ```
    
- –ê –µ—Å–ª–∏ 100? –õ–µ–Ω–∏–≤–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è. –ù—É–∂–µ–Ω –ø—Å–µ–≤–¥–æ–Ω–∏–º —Ç–∏–ø–∞ ¬´–≤–æ—Ç —Ç–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è¬ª:
    
    ```c
    typedef int (*ftype)(char *, int);
    
    ftype g = f;
    ```
    
- –¢–∞–º –º–Ω–æ–≥–æ —á—É–¥–µ—Å, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å `void`, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ –±—É–¥–µ–º.

### –ú–∞–≥–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –∏ –≤—ã–∑–æ–≤–∞

- –ú–æ–∂–Ω–æ —Å &, –º–æ–∂–Ω–æ –±–µ–∑. –≠—Ç–æ –≤—Å—ë —Ä–∞–≤–Ω–æ.

```c
g = &f;
```

```c
g = f;
```

- –ü—Ä–∏—Å–≤–∞–∏–≤–∞—è, –ø–æ–ª—É—á–∞–µ—à—å –∞–¥—Ä–µ—Å –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è. –¢–æ –µ—Å—Ç—å –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –¥–æ –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî —Ç–∞–º —Ç—É–ø–æ NULL? –ü—Ä–æ–≤–µ—Ä–∏–º.

```c
// –ö–æ–¥ –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
...
void n();
void (*d)();
d = n;
printf("%p", d);
```

- –í—ã–∑—ã–≤–∞—Ç—å –º–æ–∂–Ω–æ —Å *, –º–æ–∂–Ω–æ –±–µ–∑. –≠—Ç–æ –≤—Å—ë —Ä–∞–≤–Ω–æ. –ê –≤–æ—Ç —Å–∫–æ–±–∫–∏ –≤–∞–∂–Ω—ã.

```c
f(c, n);
```

```c
(*f)(c, n);
```

# –¢–∞–Ω—Ü—ã ‚Ä¢ –ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ä¢ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã ‚Ä¢ –£—Ä–∞, –∫–æ–¥!

1. –û–¥–∏–Ω —É–∫–∞–∑–∞—Ç–µ–ª—å ‚Äî —Ä–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. –û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ‚Äî —Ä–∞–∑–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏

```mermaid
flowchart LR

subgraph –û–¥–∏–Ω —É–∫–∞–∑–∞—Ç–µ–ª—å —Ä–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
p
f1
f2
f3

p --> f1
p -.-> f2
p -.-> f3
end

subgraph –û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏

p1
p2
p3

f

p1 --> f
p2 --> f
p3 --> f

end
```

### –ü–æ—à–∞—Ç–∞–µ–º —É—Å—Ç–æ–∏ –∂—ë—Å—Ç–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

- –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º:
    
    ```c
    int sum(int, int);
    int square(int);
    int rand();
    
    int (*f)();  // —Ö–æ–±–∞! –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    
    ... // –∑–∞–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å sum, square, rand
    
    f = sum; printf("%d\n", f(1, 2));
    f = square; printf("%d\n", f(3));
    f = sum; printf("%d\n", f());
    ```
    
- –ë–µ–∑ –º–∞–∫—Ä–æ—Å–æ–≤ –ø–æ–¥—Å—á—ë—Ç–∞ —á–∏—Å–ª–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ —ç—Ç–æ–º –Ω–µ—Ç –±–æ–ª—å—à–æ–≥–æ —Å–º—ã—Å–ª–∞?
- –ù—É –∏–ª–∏ –µ—Å–ª–∏ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —É–∫–∞–∑–∞—Ç–µ–ª–µ–º ‚Äî –∑–∞—á–µ–º-—Ç–æ.
- –ê –≤–æ—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∂–µ—Ç—Å—è, –ø—Ä–∏–±–∏—Ç –Ω–∞–º–µ—Ä—Ç–≤–æ?

–ö–∞–∫–æ–π —Ç—É—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π –ø—Ä–∏–º–µ—Ä?


### –°–¥–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞

–¢–æ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, —É –∫–æ—Ç–æ—Ä–æ–π –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö —Ç–æ–∂–µ —Ñ—É–Ω–∫—Ü–∏—è. –ò–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ.

```c
int square(int x) {
    return x * x;
}

int apply(int x, int(*f)(int)) {
    return f(x);
}

int main() {
    printf("%d\n", apply(5, square));
    return 0;
}
```

```c
int square(int x) {
    return x * x;
}

int main() {
    int(*foo)(int) = square;
    printf("%d\n", foo(5));
    return 0;
}
```

https://htmlpreview.github.io/?https://github.com/ParfenovIgor/c-book/blob/main/c-book.html#2.7

–ó–∞—á–µ–º?

- –°—Ç—Ä—É–∫—Ç—É—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ü–∏–∫–ª—ã –∏ —Ç. –ø.)

```c
void foreach(int * a, int(*g)(int)) {
	while(*a != 0) {
		printf("%d ‚Üí %d\n", *a, g(*a));
		++a;
	}
}
```

- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–µ—Ä–µ–¥–∞—á–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
- –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (map, zip –∏ —Ç. –ø.)
- –®–∞–±–ª–æ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª—é—á–µ–π –∏ —Ç. –ø.)

**–ü–æ–ª—É–ø—Ä–∏–º–µ—Ä** –±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–≤


### –ó–∞–≤–µ–¥—ë–º –º–∞—Å—Å–∏–≤ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏

–ú–Ω–æ–≥–æ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ 2‚Äì3 —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–∏.

**–ü—Ä–∏–º–µ—Ä** ‚Äî –∏–≥—Ä–∞ —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –Ω–∞–¥ —á–∏—Å–ª–∞–º–∏


# –≠–º—É–ª–∏—Ä—É–µ–º –≤ C —Å—É—â–Ω–æ—Å—Ç–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ –∏ –ø–∞—Ä–∞–¥–∏–≥–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–∏—à–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –º–æ–∫-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

- –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —É–∂–µ –±—ã–ª–∞ –Ω–∞ –ø—Ä–æ—à–ª–æ–π –ª–µ–∫—Ü–∏–∏.
- –ò —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –µ—ë —Å–¥–µ–ª–∞—Ç—å.

### –ú—ã –±–ª–∏–∑–∫–∏ –∫ –æ–±—ä–µ–∫—Ç–∞–º –∫–∞–∫ –Ω–∏–∫–æ–≥–¥–∞ –ø—Ä–µ–∂–¥–µ

```c
#include <stdio.h>

typedef int (*fp)(int);
typedef struct chain {
	int n;
	fp next;
} chain; 

int p2(int n) { return n * n; }
int p3(int n) { return n * n * n; }

int main() {
  chain * a = { .n = 7, .next = p2 };
  chain * b = { .n = 49, .next = p3 };

  printf("%d\n", b->next(a->next(a->n));
	return 0;
}
```

- ‚Ä¶–Ω–æ –Ω–µ—Ç: —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –≤—ã–∑–≤–∞–≤—à—É—é –µ—ë —Å—Ç—Ä—É–∫—Ç—É—Ä—É

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –≤—ã–±–æ—Ä–∞ –ø–æ —É—Å–ª–æ–≤–∏—é –≤–Ω—É—Ç—Ä–∏ –±–æ–ª—å—à–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

```c
#include <stdio.h>

// –§—É–Ω–∫—Ü–∏–∏
void say_hello() { printf("Hello!\n"); }
void say_goodbye() { printf("Goodbye!\n"); }

int main() {
    void (*func_ptr)(); // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    int choice = 1;

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏
    if (choice == 1)
        func_ptr = say_hello;
    else
        func_ptr = say_goodbye;

    func_ptr(); // –í—ã–∑–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
    return 0;
}
```

–≠—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –ò–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–∞–∫–æ–≥–æ (—Å–∫–∞–∂–µ–º, –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ). –ò–ª–∏ –º–µ–Ω—é.

–ü—Ä–∏–≤—è–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –∫ –∫–ª—é—á–∞–º ‚Äî —Ç–æ–∂–µ —Ç–µ–º–∞. –í —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

Callback‚Äô–∏ –º–æ–∂–Ω–æ:

```c
#include <stdio.h>

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
void on_event(const char* message) {
    printf("Event triggered: %s\n", message);
}

// –§—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤
void trigger_event(void (*callback)(const char*)) {
    callback("Button clicked");
}

int main() {
    trigger_event(on_event);
    return 0;
}
```

–ú–æ–∂–Ω–æ –¥–∞–∂–µ –¥–µ–ª–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã (–º–∞—Å—Å–∏–≤—ã) —Ñ—É–Ω–∫—Ü–∏–π:

```c
#include <stdio.h>

// –§—É–Ω–∫—Ü–∏–∏
void add(int a, int b) { printf("Add: %d\n", a + b); }
void subtract(int a, int b) { printf("Subtract: %d\n", a - b); }

int main() {
    // –¢–∞–±–ª–∏—Ü–∞ —Ñ—É–Ω–∫—Ü–∏–π
    void (*operations[2])(int, int) = {add, subtract};

    operations[0](5, 3); // –í—ã–∑–æ–≤ add
    operations[1](5, 3); // –í—ã–∑–æ–≤ subtract

    return 0;
}
```

–ö–∞–∫ —Å –ø–æ–º–æ—â—å—é —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é? –¢–æ –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ò –∑–∞—á–µ–º üôÇ

–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –ü–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:

```c
#include <stdlib.h>

const float pi = 3.14f;

struct Figure;

typedef struct {
    float x;
    float (*square)(struct Figure*);
} Figure;

float circle_square(Figure *f) {
    return pi * f->x * f->x;
}

float square_square(Figure *f) {
    return f->x * f->x;
}

Figure *build_circle(float x) {
    Figure *f = (Figure*)malloc(sizeof(Figure));
    f->x = x;
    f->square = circle_square;
    return f;
}

Figure *build_square(float x) {
    Figure *f = (Figure*)malloc(sizeof(Figure));
    f->x = x;
    f->square = square_square;
    return f;
}

int main() {
    Figure *circle = build_circle(3);
    Figure *square = build_square(3);
    printf("%f %f\n", circle->square(circle), square->square(square));
    
    return 0;
}
```
