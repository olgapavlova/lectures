<img width="1280" height="720" alt="2026-02-27" src="https://github.com/user-attachments/assets/dc2d1a3e-3683-44ec-9f32-a792251cc5fa" />

Youtube-ะทะฐะฟะธัั ะพั `2026-02-27`: https://youtu.be/FeAi2kqFKAk

# OAuth 2.0 โ ะฟััั ะบ dashboard'ั
> [!WARNING]
> ะฅะฒะฐัะธั ะดะตะปะฐัั ะผะตัะตะพััะฐะฝัะธะธ
> ะะพัะฐ ัะพะดะธัั ะฒ ะะฝัะตัะฝะตั ะทะฐ ัะฒะพะธะผะธ ะดะฐะฝะฝัะผะธ

## ะะฐะบ ะฟัะพะนัะธ ัะตัะตะท ะบะพัะดะพะฝั?
### ะกะฝะฐัะฐะปะฐ ะฒัะต ะฑัะปะธ ัะฐะฒะฝั
```mermaid
flowchart LR
app(ะฟัะธะปะพะถะตะฝะธะต):::green
server(ัะตัะฒะตั):::red

app ==> |ะกะปััั, ะดะฐะน ะดะฐะฝะฝัะต?| server

server ==> |ะะฐ!| app

classDef red fill:#D65D0E,stroke:#D65D0E,color:#F6F0D8;
classDef green fill:#9A9A00,stroke:#9A9A00,color:#F6F0D8;

```

### ะะพัะพะผ ะฟะพัะฒะธะปะธัั ะฒะตัะธัะตะปัะฝัะต ะณัะฐะผะพัั
```mermaid
sequenceDiagram
participant app
participant server

app ->> server: ะฏ ะพั ะะฐัะธ. ะะฐะน ะดะฐะฝะฝัะต?
activate server
Note right of server: ัะธัะฐะตั ะทะฐะฟะธัะบั ะพั ะะฐัะธ
server ->> app: ะะฐ!
deactivate server

```

### ะ ั ะฝะธะผะธ โ ะธ ะพัะบะฐะทั
```mermaid
sequenceDiagram
participant app
participant server

app ->> server: ะฏ ะพั ะะฐัะธ. ะะฐะน ะดะฐะฝะฝัะต?
activate server
Note right of server: ัะธัะฐะตั ะทะฐะฟะธัะบั ะพั ะะฐัะธ

alt ะณัะฐะผะพัะฐ ะะ
	server -->> app: ๐ ะะฐ!
else ััะพ-ัะพ ะฝะต ัะฐะบ
	server -->> app: ๐น ะะต ะฟะพะปะพะถะตะฝะพ 
end

deactivate server

```

### ะะฐะบะธะต ะฟัะพะฑะปะตะผั?

##### ะฃ ะฟัะธะปะพะถะตะฝะธั
1. ะะดะต ะฒะทััั ะฒะตัะธัะตะปัะฝัั ะณัะฐะผะพัั ะฟัะพััะพะผั ัะฐะฑะพัะตะผั ~~ะฟะฐัะฝั~~ ะฟัะธะปะพะถะตะฝะธั ั ะพะบัะฐะธะฝั?
	1. ะงะตััะฝะพ ะฟะพะปััะธัั ั ะะฐัะธ.
	2. ะกัะฐะฑัะธะบะพะฒะฐัั ะธะท ะฟะพะดัััะฝัั ะผะฐัะตัะธะฐะปะพะฒ.
	3. ะฃะบัะฐััั.

##### ะฃ ัะตัะฒะตัะฐ
1. ะัะบัะดะฐ ะผะฝะต ะทะฝะฐัั, ััะพ ะณัะฐะผะพัะฐ ะพั ะะฐัะธ?
2. ะฏ ััะพ, ะฒัะตั ะะฐัั ะดะพะปะถะตะฝ ะฟะพะผะฝะธัั?
3. ะะฐะปะพ ะปะธ ััะพ ะะฐัั ะธะผ ะฟะพะฝะฐัะฐะทัะตัะฐะป ะฟััั ะปะตั ะฝะฐะทะฐะดโฆ
4. ะะพั ะฟัััะธัั ะธั ะฒ ัะฐัะฐะน ะฟะตัะตะฝะพัะตะฒะฐัั, ะฐ ะพะฝะธ ะบะพัะพะฒั ัะฒะตะดัั.
5. ะะพัะตะผั ะฒะพะพะฑัะต ั?!


> [!TIP]
> ะะฐะฐะฐะฐ, ะผะธะปะธัะธัะฐะฐะฐะฐะฐ!!!



### ะ ััั ะฟัะธัะพะดะธั ะะปะฐะฒะฝัะน ะัะพะฒะตััะปััะธะบ ะะพะบัะผะตะฝัะพะฒ ะธ ะฒัะตั ัััะพะธั

- ะฏ ะฑัะดั ะทะฐ ะฒะฐั *ะฟัะพะฒะตัััั* ะดะพะบัะผะตะฝัั.
- ะ *ะฒัะดะฐะฒะฐัั* ัะพะถะต.
- ะ *ะทะฝะฐัั*, ะบะพะผั ััะพ ะฟะพะปะพะถะตะฝะพ, ะฑัะดั ัะพะถะต ั.
- ะก **ะฒะปะฐะดะตะปััะตะผ** ะดะฐะฝะฝัั ั ัะพะถะต ะดะพะณะพะฒะพัััั.
- *ะะฐัะธัะฐ* ะพั ะทะปะพะดะตะตะฒ โ ะผะพั ะดะตะปะพ, ะฝะต ะฑะตัะฟะพะบะพะนัะตัั.
- ะ ะฒัะตะผ ะฟัะธะดัััั ะพะฑัะฐัััั ะฟะพ ะผะพะธะผ **[ะฟัะฐะฒะธะปะฐะผ](https://datatracker.ietf.org/doc/html/rfc8628)**.

### ะงัะพ ะถ, ะฝะฐัะธะฝะฐะตะผ ะดะพะณะพะฒะฐัะธะฒะฐัััั ะฒัะตัะฒะตัะพะผ

```mermaid
sequenceDiagram
participant app
participant server
participant auth
participant owner

```

> [!INFO]
> ะงะตัััะต โ ััะพ ัะถะต ะผะฝะพะณะพ
> - ะญัะพ ะธะฝััะพะฒะตััั, ะฝะต ะฝะฐะดะพ ะธั ััะฐะทั ะผััะธัะตะปัะฝะพ ะฝะตัะฒะพัะบะฐัั
> - ะฃ ะฒัะตั ัะฒะพะธ ะดะตะปะฐ, ะพัะพะฑะตะฝะฝะพ ั ะฒะปะฐะดะตะปััะฐ
> - ะะปะพะดะตะธ ัะฐะบ ะธ ััััั, ะฝะฐะดะพ ะพััะพัะพะถะฝะตะน

> [!NOTE]
> ะัะพะฑะปะตะผะต ะฝะต ะฟะตัะฒะพะต ััะพะปะตัะธะต
> ะะฐะดะพะปะณะพ ะดะพ ะบะพะผะฟัััะตัะพะฒ ะฑัะปะธ: *ะพะฑัะธะต ะทะฝะฐะบะพะผัะต โ ะฒะตัะธัะตะปัะฝัะต ะณัะฐะผะพัั โ ะฟะพะดะพัะพะถะฝัะต โ ะดะพะฒะตัะตะฝะฝะพััะธ โ ะฒะตะบัะตะปั โ ะพัะดะตัะฐ โ ะผะฐะฝะดะฐัั โ ะฟะฐัะฟะพััะฐ โ ะฒะธะทั โ ะฟัะพะฟััะบะฐ โ ัะฐะปะพะฝั โ โฆ*

## ะัะตัะฐ ยซะะฒัะพัะธะทะฐัะธั ะผะฐะปะตะฝัะบะพะน ะถะตะปะตะทะบะธยป
- ะะพะปัะฝัะน ะฟะตัะตะฒะพะด ัะฟะตัะธัะธะบะฐัะธะธ [Device Authorisation Grant](https://datatracker.ietf.org/doc/html/rfc8628)
- ะะฐะบ ััั ะฟัะตัั ััะฐะฒะธั Google: [OAuth 2.0 ะดะปั ัะตะปะตะฒะธะทะพัะพะฒ ะธ ะฟัะธะปะพะถะตะฝะธะน ั ะพะณัะฐะฝะธัะตะฝะฝัะผ ะฒะฒะพะดะพะผ ะดะฐะฝะฝัั](https://developers.google.com/identity/protocols/oauth2/limited-input-device?hl=ru)

### ะกัะตะฝะฐ ะฟะตัะฒะฐั: ๐ฑ app, ๐ auth ะธ ๐ฐ owner

```mermaid
sequenceDiagram
autonumber
participant ๐ฑ
participant ๐
participant ๐ฐ

๐ฑ ->> +๐: ะญัะพ ๐ฑ, ั ะพั ๐ฐ! ะะฐะน ๐ ัะฐะปะพะฝัะธะบ, ะผะฝะต ะฝะฐ ัะตัะฒะตั ะฝะฐะดะพ

Note right of ๐: โฆะทะฝะฐั ั ััะพะณะพ ๐ฑ,<br/>ัะฐะผ ะพะฝ ั ๐ฐ ะฝะต ัะฐะทะฑะตััััั,<br/>ะฟัะธะดัััั ะผะฝะต ัะฐะผะพะผั
๐ -->> ๐ฑ: ะัััั ๐ฐ ะบะพ ะผะฝะต ะทะฐะนะดัั, ะฒะพั ๐ ะฟัะพะฟััะบ
activate ๐
๐ฑ ->> +๐ฐ: ะกัะพะดะธ ะบ ๐, ะปะฐะดะฝะพ? ะะพั ๐ ะฟัะพะฟััะบ
Note right of ๐ฐ: ะะฐ ะณะดะต ะผะพะน<br/>ัะตะปะตัะพะฝ-ัะพโฆ
loop ๐ฑ ะดััะณะฐะตั ๐
๐ฑ ->> ๐: ะั ัะตะณะพ, ๐ฐ ะดะพััะป? ะะฐะทัะตัะธะป?
end
๐ฐ -->> -๐: ะญัะพ ๐ฐ, ะฒะพั ะผะพะน ๐ ะฟัะพะฟััะบ. ะ ะฒะพั ััะพ ๐ฑ ะผะพะถะฝะพ
deactivate ๐
๐ -->> -๐ฑ: ๐ฐ ัะฐะทัะตัะธะป ะฝะฐะบะพะฝะตั, ะฒะพั ัะฒะพะน ๐ ัะฐะปะพะฝัะธะบ ะฝะฐ ัะฐะทะฝะพะต


```
### ะกัะตะฝะฐ ะฒัะพัะฐั: ๐ฑ app, ๐ป server ะธ ๐ auth
```mermaid
sequenceDiagram
autonumber
participant ๐ฑ
participant ๐ป
participant ๐

๐ฑ ->> +๐ป: ะญัะพ ๐ฑ, ะฒะพั ะผะพะน ๐, ัะพัั ๐
๐ป ->> +๐: ะัะธััะป ััั ะพะดะธะฝ, ะฟะพะบะฐะทะฐะป ๐, ะฟัะพัะธั ๐ โ ะผะพะถะฝะพ?
๐ -->> -๐ป: ะะฐ
๐ป -->> -๐ฑ: ะะพั ัะตะฑะต ๐

```
### [ะะธะบัะฐัััะบะธ-ะดะธะบัะฐัะฐ](https://youtu.be/z0Y_Pw-pCYw?si=JyP-Ix9fTqhb38VM), ะผั ะธะณัะฐะตะผ ะทะฐ ๐ฑ ~~ะบะพัะฐ~~ app

#### ะฃะทะฝะฐะตะผ, ะบัะดะฐ ะฝะฐะผ ะพัะฟัะฐะฒะปััั ๐ฐ owner'ะฐ
POST-ะทะฐะฟัะพั ะฝะฐ ะฟะฐัะฐะผะตััั ะฐะฒัะพัะธะทะฐัะธะธ ัะธะปะฐะผะธ ะบะปะธะตะฝัะฐ โ ัะตัะฒะตัั ะฐะฒัะพัะธะทะฐัะธะธ.
URL: `https://oauth2.googleapis.com/device/code`
ะะฐัะฐะผะตััั: `client_id` โ `scope`
`client_id` ะฑะตััะผ ะธะท ะฟะตัะตะผะตะฝะฝะพะน ััะตะดั `GOOGLE_CLIENT_ID`

- [CURLOPT_POST](https://curl.se/libcurl/c/CURLOPT_POST.html) โ ะฒะบะปััะฐะตะผ ะฟัะพัะพะบะพะป POST
- [CURLOPT_POSTFIELDS](https://curl.se/libcurl/c/CURLOPT_POSTFIELDS.html) โ ััะพ ะตัะปะธ ัะพัะธะผ ััะพ-ัะพ ะฟะพัะปะฐัั

`tail -4 params.txt` โ ะฟะพัะผะพััะธะผ ะฝะฐ ัะฒะพัั ะพัะฒะตัะฐ (ะบะปัั ะฝะต ัะฒะธะดะธะผ)
> [!CAUTION] ะกะบะปะฐะดัะฒะฐัั ะบะปัั ะฒ ะฝะตะทะฐัะธััะพะฒะฐะฝะฝัะน ัะฐะนะป โ ะฟะปะพัะฐั ะธะดะตั
> ะะฐะทะณะพะฒะพั ะพ ัะพะผ, ะบัะดะฐ ะตะณะพ ะดะตะฒะฐัั ะฟะพัะปะต ะฟะพะปััะตะฝะธั โ ะฒะฟะตัะตะดะธ

> ะะพะทะฒัะฐัะฐะตััั ะฒัะตะณะดะฐ JSON

#### ะัะฟัะฐะฒะปัะตะผ ๐ฐ owner'ะฐ ะบัะดะฐ ะฝะฐะดะพ

- ะัะฑะตัะตะผ JSON-ะฑะธะฑะปะธะพัะตะบั ะธะท [ัะตะปะพะณะพ ะผะตัะบะฐ](https://www.json.org/json-en.html)
- ะัะพัััะผ ัะฐะนะป ะธ ะฟะพะบะฐะถะตะผ ะธะท ะฝะตะณะพ ัะพ, ััะพ ะฝัะถะฝะพ ะฟะพะบะฐะทะฐัั

#### ะ ะฟะพัะพะผ?
1. ะ ัะธะบะปะต POST-ะทะฐะฟัะพั ัะถะต ะฝะฐ ัะพะบะตะฝ โ ัะตัะฒะตัั ะฐะฒัะพัะธะทะฐัะธะธ
2. ะ ะดะฐะปััะต GET-ะทะฐะฟัะพัั ัะตัะฒะตัั ัะตััััะพะฒ โ ั ะบะปััะพะผ ะฒ ะทะฐะณะพะปะพะฒะบะต ะธ ะฟะฐัะฐะผะตััะฐะผะธ ัะพะฑััะฒะตะฝะฝะพ ะทะฐะฟัะพัะฐ

- `curl_slist` โ ัะธะฟ ัะฟะธัะบะฐ
- [curl_slist_append()](https://curl.se/libcurl/c/curl_slist_append.html) โ ะดะพะฑะฐะฒะปัะตะผ ะทะฐะณะพะปะพะฒะพะบ ะฒ ัะฟะธัะพะบ
- [CURLOPT_HTTPHEADER](https://curl.se/libcurl/c/CURLOPT_HTTPHEADER.html) โ ััะดะฐ ะบะธะดะฐะตะผ ัะฟะธัะพะบ ะทะฐะณะพะปะพะฒะบะพะฒ

> [!INFO] ะัะธะณะพะดัััั ะดะปั Google ะธ ะฝะต ัะพะปัะบะพ
> - [ะะฐัััะพะนะบะธ ะดะพัััะฟะฐ ะฒ Google ะฒะฐัะธั ะฟัะธะปะพะถะตะฝะธะน](https://console.cloud.google.com/auth/overview?hl=ru&project=lectures-488014)
> - [OAuth-ะฟะตัะพัะฝะธัะฐ](https://developers.google.com/oauthplayground/?hl=ru)
> - [OAuth-ะดะพะบัะผะตะฝัะฐัะธั](https://developers.google.com/identity/protocols/oauth2/limited-input-device?hl=ru#allowedscopes)
> - [API reference](https://developers.google.com/youtube/v3/docs?hl=ru)
> - [Yakk](https://yaak.app)
> - [Postman](https://www.postman.com)

